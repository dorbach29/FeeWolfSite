import { useEffect, useState } from 'react';
import io from 'socket.io-client';
import Head from 'next/head'
import Image from 'next/Image'
import TR from '../components/gas/TableRow'
import styles from '../styles/Gas.module.css'


/**
 * Page with the listed gas prices for all of the coins
 */
export default function Gas() {

  /**
   * Data to be used to populate the table
   * In the future this would probably be pulled from an API using getServerSideProps()
   * This might have to be made into a state
   */
  const coins = [ {
    logoLink : "/EthLogo.png",
    logoDesc : "Ethereum Logo",
    name : "Ethereum",
    currPrice : 1200,
    oneHourPrice: 109,
    tfHourPrice: 150,
    socketEvent: "EthUpdate",
    key : 1,
  },
  {
    logoLink: "/SolLogo.png",
    logoDesc : "Solano Logo",
    name : "Solano",
    currPrice: 87,
    oneHourPrice: 120,
    tfHourPrice: 111,
    socketEvent: "SolUpdate",
    key: 2,

  },
  {
    logoLink: "/CarLogo.png",
    logoDesc : "Cardano Logo",
    name : "Cardano",
    currPrice: 91,
    oneHourPrice: 178,
    tfHourPrice: 123,
    socketEvent: "CarUpdate",
    key: 3,

  },
  {
    logoLink: "/IcpLogo.png",
    logoDesc : "Internet Computer Logo",
    name : "Internet Computer",
    currPrice: 87,
    oneHourPrice: 120,
    tfHourPrice: 111,
    socketEvent: "IcpUpdate",
    key: 4,

  },
  {
    logoLink: "/DotLogo.png",
    logoDesc : "Polkadot Logo",
    name : "Polkadot",
    currPrice: 87,
    oneHourPrice: 120,
    tfHourPrice: 111,
    socketEvent: "DotUpdate",
    key: 5,
  },
 ] 

  /**
   *  Handles all websocket communication for now
   *  this includes updating the gas fee when socket.io sends an update
  
  useEffect(()=> {
    console.log("Connecting to the socket")
    const socket = io("http://localhost:5000");
    socket.on("EtherUpdate", (args)=>{
      setEtherPrice(args.GasFee)
    })
  }, [])

  */

  /** React state for the ether gas fee*/ 
  //const [etherPrice, setEtherPrice] = useState(0);


  //Layout of the gasfee page
  return (
    <>
      <Head>
        <title>Gas Fee Tracker</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
        <h3 className={styles.title}>
          Gas Prices Today
        </h3>
        <table className={styles.table}>
          <thead>
            <tr className={styles.row}>
              <th>Name</th>
              <th>GasFee(gwei)</th>
              <th>1hr(gwei)</th>
              <th>24hr(gwei)</th>
            </tr>
          </thead>
          <tbody>
            {/**Loads different rows of coins */}
            {coins.map((coin)=> {
              return (<TR key={coin.key} data={coin}></TR>);
            })}
 
          </tbody>
        </table>
        
        {/*
        <table>
          <tr>
            <th>Name</th>
            <th>Gas Fee</th>
            <th>1hr</th>
            <th>24hr</th>
            <th>7d</th>
          </tr>
       
        </table>
           */}
      </main>

    </>
  )
}
